<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>ğŸ§© ØªØ­Ø¯ÙŠ Ø§Ù„ÙŠÙˆÙ… - Ø§Ù„Ù…Ø¨Ø±Ù…Ø¬ Ø§Ù„ØµØºÙŠØ±</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@600&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Cairo', sans-serif;
      background: #f6e58d;
      margin: 0; padding: 20px;
      color: #2d3436;
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      justify-content: center;
    }
    header {
      background-color: #e1b12c;
      color: white;
      padding: 15px 30px;
      font-size: 2.5rem;
      border-radius: 12px;
      margin-bottom: 20px;
      box-shadow: 0 4px 12px rgba(225,177,44,0.7);
      width: 100%;
      max-width: 600px;
    }
    .challenge-box {
      background: white;
      padding: 25px;
      border-radius: 20px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      max-width: 600px;
      width: 100%;
      position: relative;
    }
    select, input[type="text"] {
      padding: 10px;
      font-size: 16px;
      margin-bottom: 15px;
      border-radius: 12px;
      border: 2px solid #e1b12c;
      background-color: #ffeaa7;
      width: 80%;
      text-align: center;
    }
    button {
      background-color: #e1b12c;
      color: white;
      font-size: 1.1rem;
      padding: 10px 25px;
      margin-top: 10px;
      border: none;
      border-radius: 15px;
      cursor: pointer;
      transition: background-color 0.3s ease;
      font-weight: 700;
    }
    button:hover {
      background-color: #d4a017;
    }
    .result {
      margin-top: 15px;
      font-size: 1.2rem;
      font-weight: bold;
      min-height: 40px;
    }
    .correct { color: #00b894; }
    .incorrect { color: #d63031; }
    .points {
      margin-top: 10px;
      font-size: 1.2rem;
      color: #0984e3;
      font-weight: 700;
    }
    .rank {
      margin-top: 10px;
      padding: 10px;
      border-radius: 12px;
      font-weight: bold;
      font-size: 1.3rem;
      color: white;
      background-color: #fdcb6e;
    }
    .badge {
      margin-top: 15px;
      font-size: 1.4rem;
    }
    #animation {
      width: 120px;
      margin: 20px auto 0;
      display: none;
    }
    #timer {
      font-size: 1.2rem;
      margin-top: 10px;
      color: #d35400;
      font-weight: 700;
    }
    #userNameDisplay {
      margin-bottom: 15px;
      font-size: 1.5rem;
      color: #6c5ce7;
      font-weight: 700;
    }
  </style>
</head>
<body>

  <header>ğŸ§© ØªØ­Ø¯ÙŠ Ø§Ù„ÙŠÙˆÙ… - Ø§Ù„Ù…Ø¨Ø±Ù…Ø¬ Ø§Ù„ØµØºÙŠØ±</header>

  <div class="challenge-box">

    <div id="userNameDisplay"></div>

    <select id="level">
      <option value="easy">ğŸ£ Ù…Ø¨ØªØ¯Ø¦</option>
      <option value="medium">ğŸ¤ Ù…ØªÙˆØ³Ø·</option>
      <option value="hard">ğŸ¦… Ù…ØªÙ‚Ø¯Ù…</option>
    </select>

    <div id="challengeText" style="margin-top: 15px;"></div>

    <input type="text" id="answer" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ù‡Ù†Ø§..." />
    <button id="checkBtn">ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©</button>

    <div class="result" id="result"></div>
    <div id="timer"></div>
    <div class="points" id="points">Ù†Ù‚Ø§Ø·Ùƒ: 0</div>
    <div class="rank" id="rank">ğŸ… Ù„Ù‚Ø¨Ùƒ: Ù…Ø¨ØªØ¯Ø¦ ØµØºÙŠØ±</div>
    <div class="badge" id="badge"></div>

    <button id="shareBtn" style="display:none; margin-top:15px;">ğŸ“¤ Ø´Ø§Ø±Ùƒ Ù†ØªÙŠØ¬ØªÙƒ</button>

    <img id="animation" src="" alt="Ø±Ø¯Ø© ÙØ¹Ù„" />

    <audio id="sound-true" src="True.m4a"></audio>
    <audio id="sound-false" src="Valse.m4a"></audio>
  </div>

<script>
  let points = 0;
  let timerInterval;
  let timer = 60;

  const userNameDisplay = document.getElementById("userNameDisplay");
  const levelSelect = document.getElementById("level");
  const challengeText = document.getElementById("challengeText");
  const answerInput = document.getElementById("answer");
  const checkBtn = document.getElementById("checkBtn");
  const resultDiv = document.getElementById("result");
  const pointsDiv = document.getElementById("points");
  const rankDiv = document.getElementById("rank");
  const badgeDiv = document.getElementById("badge");
  const animation = document.getElementById("animation");
  const timerDiv = document.getElementById("timer");
  const shareBtn = document.getElementById("shareBtn");

  const soundTrue = document.getElementById("sound-true");
  const soundFalse = document.getElementById("sound-false");

  const challenges = {
    easy: {
      text: 'Ù‡Ù„ ØªØ³ØªØ·ÙŠØ¹ ÙƒØªØ§Ø¨Ø© Ø¨Ø±Ù†Ø§Ù…Ø¬ ÙŠØ·Ø¨Ø¹ Ø§Ø³Ù…ÙƒØŸ',
      example: 'print("Ø§Ø³Ù…ÙŠ Ø¹Ù…Ø±")',
      validate: (input) => /print\s*\(\s*["'][^"']+["']\s*\)/i.test(input)
    },
    medium: {
      text: 'Ø§ÙƒØªØ¨ Ø¨Ø±Ù†Ø§Ù…Ø¬ ÙŠØ·Ø¨Ø¹ Ù…Ø¬Ù…ÙˆØ¹ 3 + 5',
      example: 'print(3 + 5)',
      validate: (input) => input.replace(/\s/g, '') === 'print(3+5)'
    },
    hard: {
      text: 'Ø§ÙƒØªØ¨ Ø¨Ø±Ù†Ø§Ù…Ø¬ ÙŠØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø±Ù‚Ù… Ø£ÙƒØ¨Ø± Ù…Ù† 10',
      example: 'if x > 10:\n  print("ÙƒØ¨ÙŠØ±")',
      validate: (input) => /if\s+.+>\s*10\s*:\s*[\n\r]?[\s]*print/i.test(input)
    }
  };

  function loadData() {
    const savedPoints = localStorage.getItem("tinyCoderPoints");
    const savedName = localStorage.getItem("tinyCoderName");

    if (!savedName) {
      alert("ÙŠØ±Ø¬Ù‰ Ø£ÙˆÙ„Ø§Ù‹ Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ø·Ø§Ù‚ØªÙƒ ÙÙŠ ØµÙØ­Ø© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©!");
      // ÙŠÙ…ÙƒÙ† Ù‡Ù†Ø§ ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„ØµÙØ­Ø© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ù…Ø«Ù„Ø§Ù‹:
      // window.location.href = "card.html";
      return;
    }

    points = savedPoints ? parseInt(savedPoints) : 0;
    pointsDiv.textContent = "Ù†Ù‚Ø§Ø·Ùƒ: " + points;
    userNameDisplay.textContent = `Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ ${savedName}! ğŸ‰`;
    updateRank();
    loadChallenge();
  }

  function loadChallenge() {
    const level = levelSelect.value;
    const c = challenges[level];
    challengeText.innerHTML = `
      <p>${c.text}</p>
      <p><strong>Ù…Ø«Ø§Ù„:</strong> <code>${c.example}</code></p>
    `;
    answerInput.value = '';
    resultDiv.textContent = '';
    animation.style.display = 'none';
    shareBtn.style.display = 'none';
    resetTimer();
    startTimer();
  }

  function updateRank() {
    if (points >= 101) {
      rankDiv.textContent = "ğŸ… Ù„Ù‚Ø¨Ùƒ: Ù†Ø¬Ù… Ø§Ù„Ø£ÙƒÙˆØ§Ø¯";
      rankDiv.style.backgroundColor = "#f1c40f";
      badgeDiv.textContent = "ğŸŒŸ Ø­ØµÙ„Øª Ø¹Ù„Ù‰ Ø´Ø§Ø±Ø© Ø¨Ø·Ù„ Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©!";
    } else if (points >= 51) {
      rankDiv.textContent = "ğŸ… Ù„Ù‚Ø¨Ùƒ: Ù…Ø¨Ø±Ù…Ø¬ Ø´Ø¬Ø§Ø¹";
      rankDiv.style.backgroundColor = "#74b9ff";
      badgeDiv.textContent = "ğŸ… Ø­ØµÙ„Øª Ø¹Ù„Ù‰ Ø´Ø§Ø±Ø© Ø§Ù„Ù…Ø¨Ø±Ù…Ø¬ Ø§Ù„Ø´Ø¬Ø§Ø¹";
    } else if (points >= 21) {
      rankDiv.textContent = "ğŸ… Ù„Ù‚Ø¨Ùƒ: Ù…ØºØ§Ù…Ø± ÙƒÙˆØ¯";
      rankDiv.style.backgroundColor = "#e17055";
      badgeDiv.textContent = "ğŸ–ï¸ Ø­ØµÙ„Øª Ø¹Ù„Ù‰ Ø´Ø§Ø±Ø© Ø§Ù„Ù…ØºØ§Ù…Ø±";
    } else {
      rankDiv.textContent = "ğŸ… Ù„Ù‚Ø¨Ùƒ: Ù…Ø¨ØªØ¯Ø¦ ØµØºÙŠØ±";
      rankDiv.style.backgroundColor = "#fdcb6e";
      badgeDiv.textContent = "";
    }
  }

  function startTimer() {
    timer = 60;
    timerDiv.textContent = `â±ï¸ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: ${timer} Ø«Ø§Ù†ÙŠØ©`;
    timerInterval = setInterval(() => {
      timer--;
      timerDiv.textContent = `â±ï¸ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: ${timer} Ø«Ø§Ù†ÙŠØ©`;
      if (timer <= 0) {
        clearInterval(timerInterval);
        timerDiv.textContent = "â° Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª!";
        checkBtn.disabled = true;
        soundFalse.play();
      }
    }, 1000);
  }

  function resetTimer() {
    clearInterval(timerInterval);
    timerDiv.textContent = "";
    checkBtn.disabled = false;
  }

  checkBtn.onclick = () => {
    clearInterval(timerInterval);
    const level = levelSelect.value;
    const input = answerInput.value.trim();
    const isCorrect = challenges[level].validate(input);

    if (isCorrect) {
      resultDiv.textContent = "âœ… Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! Ø£Ø­Ø³Ù†Øª!";
      resultDiv.className = "result correct";
      points += 10;
      localStorage.setItem("tinyCoderPoints", points);
      pointsDiv.textContent = "Ù†Ù‚Ø§Ø·Ùƒ: " + points;
      updateRank();
      animation.src = "hapy.jpg"; // Ø¶Ø¹ Ù‡Ù†Ø§ Ù…Ø³Ø§Ø± ØµÙˆØ±Ø© Ø§Ù„Ø·ÙÙ„ Ø§Ù„ÙØ±Ø­Ø©
      animation.style.display = 'block';
      soundTrue.play();
      shareBtn.style.display = "inline-block";
    } else {
      resultDiv.textContent = "âŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.";
      resultDiv.className = "result incorrect";
      animation.src = "sad.jpg"; // Ø¶Ø¹ Ù‡Ù†Ø§ Ù…Ø³Ø§Ø± ØµÙˆØ±Ø© Ø§Ù„Ø·ÙÙ„ Ø§Ù„Ø­Ø²ÙŠÙ†
      animation.style.display = 'block';
      soundFalse.play();
      shareBtn.style.display = "none";
    }
  };

  levelSelect.addEventListener("change", () => {
    loadChallenge();
    shareBtn.style.display = "none";
  });

  shareBtn.onclick = () => {
    const savedName = localStorage.getItem("tinyCoderName") || "ØµØ¯ÙŠÙ‚ÙŠ";
    const msg = `Ø£Ù†Ø§ ${savedName} Ø¬Ù…Ø¹Øª ${points} Ù†Ù‚Ø·Ø© Ø¨Ù„Ø¹Ø¨Ø© Ø§Ù„Ù…Ø¨Ø±Ù…Ø¬ Ø§Ù„ØµØºÙŠØ±! Ø¬Ø±Ø¨Ù‡Ø§ Ø£Ù†Øª ÙƒÙ…Ø§Ù† ğŸ¤–`;
    if (navigator.clipboard) {
      navigator.clipboard.writeText(msg).then(() => {
        alert("ØªÙ… Ù†Ø³Ø® Ø±Ø³Ø§Ù„ØªÙƒ! ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† Ù„ØµÙ‚Ù‡Ø§ ÙˆÙ…Ø´Ø§Ø±ÙƒØªÙ‡Ø§ Ù…Ø¹ Ø§Ù„Ø£Ù‡Ù„ Ø£Ùˆ Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡.");
      });
    } else {
      alert("Ø¬Ù‡Ø§Ø²Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ù†Ø³Ø® Ø§Ù„Ù†Øµ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ØŒ ÙŠØ±Ø¬Ù‰ Ù†Ø³Ø®Ù‡ ÙŠØ¯ÙˆÙŠØ§Ù‹:\n\n" + msg);
    }
  };

  // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆØ§Ù„Ù†Ù‚Ø§Ø· Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
  loadData();
</script>

</body>
</html>